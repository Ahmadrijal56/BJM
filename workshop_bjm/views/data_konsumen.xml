<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Tree View -->
    <record id="view_data_konsumen_tree" model="ir.ui.view">
        <field name="name">data.konsumen.tree</field>
        <field name="model">workshop_bjm.data_konsumen</field>
        <field name="arch" type="xml">
            <tree>
                <field name="kode_dokumen" />
                <field name="name" />
                <field name="alamat" />
                <field name="no_polisi" />
                <field name="merk_mobil_id" />
                <field name="varian_mobil_id" />
                <field name="no_km" />
                <field name="no_telepon" />
                <field name="no_fax" />
                <field name="tanggal_service" />
                <field name="no_faktur" />
            </tree>
        </field>
    </record>

    <!-- Form View -->
    <record id="view_data_konsumen_form" model="ir.ui.view">
        <field name="name">data.konsumen.form</field>
        <field name="model">workshop_bjm.data_konsumen</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <div class="oe_title">
                        <h1 style="text-align: left;">Data Konsumen Bintang Jaya Motor</h1>
                        <field name="kode_dokumen" />
                    </div>
                    <group>
                        <group>
                            <field name="name" required="1" />
                            <field name="alamat" />
                            <field name="no_telepon" />
                            <field name="no_fax" />
                            <field name="tanggal_service" required="1" />
                            <field name="no_faktur" required="1" />
                        </group>
                        <group>
                            <field name="no_polisi" required="1" />
                            <field name="merk_mobil_id" required="1" />
                            <field name="varian_mobil_id" required="1" />
                            <field name="no_km" required="1" />
                        </group>
                    </group>
                    <notebook>
                        <page string="Data Service" name="operations">
                            <field name="data_konsumen_line_ids" widget="one2many_list" required="1">
                                <tree editable="top">
                                    <field name="nama_barang" required="1"/>
                                    <field name="mekanik" widget="many2many_tags" required="1"/>
                                    <field name="keterangan" />
                                </tree>
                                <form>
                                    <group>
                                        <field name="nama_barang" required="1" />
                                        <field name="mekanik" required="1"/>
                                        <field name="keterangan" />
                                    </group>
                                </form>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_data_konsumen_search" model="ir.ui.view">
        <field name="name">data.konsumen.search</field>
        <field name="model">workshop_bjm.data_konsumen</field>
        <field name="arch" type="xml">
            <search>
                <field name="no_polisi" string="No Polisi" />
                <field name="name" string="Nama" />
                <field name="alamat" string="Alamat" />
                <field name="merk_mobil_id" string="Merk Mobil" />
                <field name="varian_mobil_id" string="Varian Mobil" />
                <field name="no_telepon" string="No Telepon" />
                <field name="no_fax" string="No Fax" />
                <field name="tanggal_service" string="Tanggal Service" />
                <field name="no_faktur" string="No Faktur" />
                <field name="data_konsumen_line_ids" string="Data Service" />

                <!-- Menambahkan pencarian untuk nama_barang -->
                <field name="search_nama_barang" string="Nama Barang" />

                <!-- Menambahkan pencarian untuk mekanik -->
                <field name="search_mekanik" string="Mekanik" />

                <!-- Menambahkan pencarian untuk keterangan -->
                <field name="search_keterangan" string="Keterangan" />

                <!-- Menambahkan group by -->
                <filter string="Group By" name="group_by">
                    <filter name="name" string="Nama" context="{'group_by': 'name'}" />
                    <filter name="alamat" string="Alamat" context="{'group_by': 'alamat'}" />
                    <filter name="no_polisi" string="No Polisi" context="{'group_by': 'no_polisi'}" />
                    <filter name="merk_mobil_id" string="Merk Mobil" context="{'group_by': 'merk_mobil_id'}" />
                    <filter name="varian_mobil_id" string="Varian Mobil" context="{'group_by': 'varian_mobil_id'}" />
                    <filter name="no_telepon" string="No Telepon" context="{'group_by': 'no_telepon'}" />
                    <filter name="no_fax" string="No Fax" context="{'group_by': 'no_fax'}" />
                    <filter name="tanggal_service" string="Tanggal Service" context="{'group_by': 'tanggal_service'}" />
                    <filter name="no_faktur" string="No Faktur" context="{'group_by': 'no_faktur'}" />
                </filter>
            </search>
        </field>
    </record>


    <!-- Action untuk data_konsumen -->
    <record id="action_data_konsumen" model="ir.actions.act_window">
        <field name="name">Data Konsumen</field>
        <field name="res_model">workshop_bjm.data_konsumen</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="view_data_konsumen_tree" /> <!-- Referensi ke view tree yang sudah ada -->
        <field name="search_view_id" ref="view_data_konsumen_search" />
        <!-- Referensi ke search view yang baru dibuat -->
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first Konsumen
            </p>
        </field>
    </record>


    <!-- Menu Item -->
    <menuitem id="menu_workshop_bjm_root" name="Workshop BJM" />

    <menuitem id="menu_data_konsumen" name="Data Konsumen" parent="menu_workshop_bjm_root"
        action="action_data_konsumen" />
</odoo>